<!-- Run loader before get data -->
<lst-loader [isRunning]="isRequesting"></lst-loader>

<div class="row">
    <div class="col-lg-12">
        <h1 class="page-header">Leaves</h1>
    </div>
</div>

<div class="row">
 	 <div class="form-group col-md-2 pull-right">
	    <select name="sort"
	    		class="form-control"
	    		[(ngModel)]="sortBy">
		    <option *ngFor="let sort of sortTypes" [ngValue]="sort">		
					{{ sort | uppercase | spilt:'_' }}
			</option>
	    </select>
	</div>
</div>
<div class="row">
    <div class="col-lg-12">
        <div class="panel">
        	<div *ngIf="!leaves || (leaves && !leaves[0])">
                No records.
            </div>
            <div *ngIf="leaves && leaves[0]">
	            <table width="100%" class="table table-striped table-bordered table-hover" id="dataTables-example">
	                <thead>
	                    <tr>
	                        <th>Sr. No.</th>
	                        <th>Subject</th>
	                        <th>Reason</th>
	                        <th>Apply On</th>
	                        <th>On Leave</th>
	                        <th>Type</th>
	                        <th>Status</th>
	                    </tr>
	                </thead>
	             	<tbody>
						<tr *ngFor = "let leave of leaves | orderBy: [sortBy]; let i= index"
							(click)="goToLeaveDetails(leave.id)"
							class="odd gradeX pointer">
							<td> {{ i + 1 }} </td>
							<!-- <td>{{ leave?.user[0]?.emp_id }}</td> -->
							<!-- <td>{{ leave?.user[0]?.name }}</td> -->
							<td>
								{{ leave?.subject }}
							</td>
							<td>
								<span> {{ leave?.note }}</span>
								<!-- less than or equal to  '<textLimit>'' chars -->
								<span *ngIf="leave.note <= textLimit">
									{{ leave?.note }}
								</span>

								<!-- greater than '<textLimit>'' chars (show only '<textLimit>'' chars) -->
								<span *ngIf="leave.note > textLimit">
									{{ leave?.note | slice:0:textLimit }}...
								</span>
							</td>
							<td>
								{{ leave?.created_at | date:'mediumDate' }}
							</td>
							<td>
								{{ leave?.date_from | date:'mediumDate'}}
							</td>
							<td>
								{{ leave?.type }}
							</td>
							<td>
								<!-- {{ leave?.status }} -->
								<span *ngIf="leave && leave.status == '1'"> Approved </span>
								<span *ngIf="leave && leave.status == '0'"> Not Approved </span>
							</td>
						</tr>
					</tbody>
	            </table>
        </div>
    </div>
</div>